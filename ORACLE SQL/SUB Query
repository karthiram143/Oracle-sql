-- SUB QUERY
its is a query or select query inside another queryto improve the maintainability  and performance of your query
-- TYPE:
single row sub query
multi row sub query
scalar sub query
inline sub query
Nested sub query
Correlated sub query
Multi column sub query

        -- single row sub query 
a sub query returned  only one row/valuerelational opeators supported (=,<,>,<=,<>,in, not in,>=)
-- SYN:
SELECT column1,columnsFrom table 
where condition=(--sub query below (17)
    select column 1 from table where condition)
--  example:(reqirement like i want to check greater than Betty salary people want to see)
SELECT FIRST_NAME,SALARY FROM EMPLOYEE WHERE FIRST_NAME='Betty';
-- result:
IRST_NAME	SALARY
Betty	56000
-- (to check the salary greater thatn betty i am getting the result now)
SELECT FIRST_NAME,SALARY FROM EMPLOYEE WHERE SALARY>'56000';
-- result:
FIRST_NAME	SALARY
Jane	62000
Emily	72000
-- (using sub query final query)
-- this kind of result i need to acchive in a single query use the sub query
SELECT FIRST_NAME,SALARY FROM EMPLOYEE 
WHERE SALARY >(SELECT SALARY 
              FROM EMPLOYEE WHERE FIRST_NAME='Betty');

-- RESULT:
FIRST_NAME	SALARY
Jane	62000
Emily	72000


    --    multi row sub query
A sub query returning more than one row/value
rational operator supported (IN, NOT IN ALL, ANY)
-- SYN:
SELECT column, column FROM tablewhere condition in | not in (select column from table where condition)    
-- example:(Requirementwho ever is working under department-90  is couple person salary are takenis they are lesser than salary will show the screen)
SELECT FIRST_NAME,SALARY FROM EMPLOYEE WHERE DEPARTMENT_ID='30'
-- RESULT:
FIRST_NAME	SALARY
Emily	72000
David	61000
Emily	72000
-- Manullay taken the salary and using the query that is requiement for this case will go mulit row sub query 
SELECT FIRST_NAME,SALARY FROM EMPLOYEE WHERE SALARY NOT IN (61000,72000,56000);
-- RESULT:
FIRST_NAME	SALARY
John	55000
Jane	62000
Robert	48000

--  (final sub query)
SELECT FIRST_NAME,SALARY FROM EMPLOYEE 
WHERE SALARY NOT IN (SELECT SALARY 
                     FROM EMPLOYEE WHERE DEPARTMENT_ID='30');
-- RESULT:
FIRST_NAME	SALARY
John	55000
Jane	62000
Robert	48000

-- >ALL(based on the subquery which one is highest take the value and give the result)
-- (sub query greater than 3 is 72000
-- SALARY 72000,61000,56000)
SELECT FIRST_NAME,SALARY FROM EMPLOYEE 
WHERE SALARY > '72000'; --AS LIKE 
-- FINAL QUERY
SELECT FIRST_NAME,SALARY FROM EMPLOYEE 
WHERE SALARY > ALL (SELECT SALARY 
                     FROM EMPLOYEE WHERE DEPARTMENT_ID='30');                  
-- RESULT:
FIRST_NAME	SALARY
Matthew	75000                     

--    scalar sub query
A Sub query inside a select clause
a scalar subquery returns exactly one ore as output
if the scalar subquery finds no match it return null
if the scalar subquery finds more than one math , return an eorrr
-- syn:
select column1,columns,(select column from t form ) from table
-- example
SELECT MIN(SALARY) FROM EMPLOYEE; --47000
SELECT Max(SALARY) FROM EMPLOYEE; --75000
-- sub query
 SELECT FIRST_NAME ,(SELECT MIN(SALARY) FROM EMPLOYEE WHERE DEPARTMENT_ID='30')AS MIN_SALRY,SALARY,
 (SELECT Max(SALARY) FROM EMPLOYEE WHERE DEPARTMENT_ID='20')AS MAX_SALARY 
 FROM EMPLOYEE
 WHERE DEPARTMENT_ID='10'
--  RESULT:
FIRST_NAME	MIN_SALRY	SALARY	MAX_SALARY
John	56000	55000	67000
Robert	56000	48000	67000
James	56000	47000	67000

    --inline sub query/inline View
A sub query inside a from clause
in line views are used to simplify  complex queries
-- syn:
select column from table,(select column from table)where    
-- Example:(ROW NUM ACCEPT ONLY 1 IN WHERE CLASUE NOT ALLOW OTHER NUMBERS based on the inserted row numbers)
rownum=1, rownum <15 its works
-- e.*  -- to get all the rows
SELECT ROWNUM, e.* from EMPLOYEE E
-- to achive the rownum=5 
--  final query
SELECT RN, FIRST_NAME,EMPLOYEE_ID 
FROM (SELECT ROWNUM AS RN, e.* from EMPLOYEE E order by EMPLOYEE_ID asc) G
WHERE RN=5
-- RESULT:
 RN	FIRST_NAME	EMPLOYEE_ID
5	Michael	5

   -- NESTED SUB QUERY ( as like Single row sub query and multi row sub query)

 A sub query inside where clause
--  syn:
 SELECT column form tableWhere condition in|not (select column from where condition)

   --  Correlated SUB QUERY

 If a sub query depends  on outer query or the outer query depends on inner query
--  syntax:
 select column form table t1where condition in (select column from table t2 where t2.column =t2.column)
-- example:
SELECT FIRST_NAME , EMPLOYEE_ID FROM EMPLOYEE E 
WHERE DEPARTMENT_ID IN (SELECT DEPRATMENT_ID FROM DEPARTMNET D WHERE D.DEPARTMENT_ID=E.DEPARTMENT_ID)

     --MULTI COLUMN SUB QUERY
MULTI COLUMN sub querythe subquery that returns more than one column
-- SYN:
select column from table where (column,colum) in (select columnsloumn from t where condition);   
-- EXAMPLE  
SELECT *FROM EMPLOYEE WHERE FIREST_NAME='DAVID'
AND JOB_ID='SA_REP'
-- Using 2 condition to handle the multi column sub query
SELECT * FROM EMPLOYEE 
WHERE (FIRST_NAME, JOB_ID) IN 
(SELECT FIRST_NAME,JOB_9D) FROM EMPLOYEE WHER EMPLOYEE_ID IN(151,165))
